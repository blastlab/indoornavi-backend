<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    #container {
        width: 500px;
        height: 500px;
        background: darkgray;
        position: relative;
    }

    .square {
        width: 5px;
        height: 5px;
        position: absolute;
    }

    .white {
	    background: white;
    }

	.black {
		background: black;
	}

	.red {
		background: red;
	}

	.pink {
		background: pink;
	}

	.green {
		background: green;
	}
</style>
<body>
<div id="container">
</div>
</body>
<script
        src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
        crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        var isConnectionOpen = false;
        var socket = new WebSocket("ws://localhost:80/coordinates?server");
        var message = {
            x: 0,
            y: 0
        };
        var coordinates = [
            {
            	x: 3,
                y: 0
            },
	        {
		        x: 3,
		        y: -1
	        },
	        {
		        x: 3,
		        y: -2
	        },
	        {
		        x: 3,
		        y: -3
	        },
	        {
		        x: 4,
		        y: -3
	        },
	        {
		        x: 5,
		        y: -3
	        },
            {
		        x: 6,
		        y: -3
	        },
	        {
		        x: 6,
		        y: -4
	        },
	        {
		        x: 6,
		        y: -5
	        },
	        {
		        x: 7,
		        y: -5
	        },
	        {
		        x: 8,
		        y: -5
	        },
	        {
		        x: 8,
		        y: -4
	        },
	        {
		        x: 8,
		        y: -3
	        },
	        {
		        x: 8,
		        y: -2
	        }
        ];
        var getDistances = function(x, y) {
        	x *= 100;
        	y *= 100;
        	return [
                {
                	d1: 1,
                    d2: 32768,
                    dist: Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))
                },
		        {
			        d1: 1,
			        d2: 32769,
			        dist: Math.sqrt(Math.pow(1000 - x, 2) + Math.pow(y, 2))
		        },
		        {
			        d1: 1,
			        d2: 32770,
			        dist: Math.sqrt(Math.pow(x, 2) + Math.pow(1000 - y, 2))
		        },
                {
                	d1: 2,
                    d2: 32770,
                    dist: 1000
                }
            ]
        };

        var color = 'white';

        var distances = [{"d1":65301,"d2":14749,"dist":564},{"d1":65308,"d2":14749,"dist":461},{"d1":65312,"d2":14749,"dist":93},{"d1":65301,"d2":14749,"dist":570},{"d1":65308,"d2":14749,"dist":458},{"d1":65312,"d2":14749,"dist":91},{"d1":65301,"d2":14749,"dist":568},{"d1":65308,"d2":14749,"dist":514},{"d1":65312,"d2":14749,"dist":97},{"d1":65301,"d2":14749,"dist":565},{"d1":65308,"d2":14749,"dist":455},{"d1":65312,"d2":14749,"dist":93},{"d1":65301,"d2":14749,"dist":571},{"d1":65308,"d2":14749,"dist":450},{"d1":65312,"d2":14749,"dist":90},{"d1":65301,"d2":14749,"dist":561},{"d1":65308,"d2":14749,"dist":448},{"d1":65312,"d2":14749,"dist":90},{"d1":65301,"d2":14749,"dist":557},{"d1":65308,"d2":14749,"dist":452},{"d1":65312,"d2":14749,"dist":96},{"d1":65301,"d2":14749,"dist":559},{"d1":65308,"d2":14749,"dist":453},{"d1":65312,"d2":14749,"dist":93},{"d1":65301,"d2":14749,"dist":557},{"d1":65308,"d2":14749,"dist":471},{"d1":65312,"d2":14749,"dist":91},{"d1":65301,"d2":14749,"dist":568},{"d1":65308,"d2":14749,"dist":441},{"d1":65312,"d2":14749,"dist":84},{"d1":65301,"d2":14749,"dist":590},{"d1":65308,"d2":14749,"dist":422},{"d1":65312,"d2":14749,"dist":62},{"d1":65301,"d2":14749,"dist":604},{"d1":65308,"d2":14749,"dist":448},{"d1":65312,"d2":14749,"dist":66},{"d1":65301,"d2":14749,"dist":610},{"d1":65308,"d2":14749,"dist":469},{"d1":65312,"d2":14749,"dist":57},{"d1":65301,"d2":14749,"dist":626},{"d1":65308,"d2":14749,"dist":459},{"d1":65312,"d2":14749,"dist":48},{"d1":65301,"d2":14749,"dist":617},{"d1":65308,"d2":14749,"dist":441},{"d1":65312,"d2":14749,"dist":71},{"d1":65301,"d2":14749,"dist":616},{"d1":65308,"d2":14749,"dist":438},{"d1":65312,"d2":14749,"dist":92},{"d1":65301,"d2":14749,"dist":554},{"d1":65308,"d2":14749,"dist":437},{"d1":65312,"d2":14749,"dist":112},{"d1":65301,"d2":14749,"dist":559},{"d1":65308,"d2":14749,"dist":442},{"d1":65312,"d2":14749,"dist":118},{"d1":65301,"d2":14749,"dist":564},{"d1":65308,"d2":14749,"dist":460},{"d1":65312,"d2":14749,"dist":94},{"d1":65301,"d2":14749,"dist":580},{"d1":65308,"d2":14749,"dist":521},{"d1":65312,"d2":14749,"dist":95},{"d1":65301,"d2":14749,"dist":605},{"d1":65308,"d2":14749,"dist":539},{"d1":65312,"d2":14749,"dist":92},{"d1":65301,"d2":14749,"dist":617},{"d1":65308,"d2":14749,"dist":525},{"d1":65312,"d2":14749,"dist":94},{"d1":65301,"d2":14749,"dist":603},{"d1":65308,"d2":14749,"dist":509},{"d1":65312,"d2":14749,"dist":117},{"d1":65301,"d2":14749,"dist":568},{"d1":65308,"d2":14749,"dist":491},{"d1":65312,"d2":14749,"dist":110},{"d1":65301,"d2":14749,"dist":586},{"d1":65308,"d2":14749,"dist":435},{"d1":65312,"d2":14749,"dist":143},{"d1":65301,"d2":14749,"dist":567},{"d1":65308,"d2":14749,"dist":388},{"d1":65312,"d2":14749,"dist":163},{"d1":65301,"d2":14749,"dist":591},{"d1":65308,"d2":14749,"dist":351},{"d1":65312,"d2":14749,"dist":179},{"d1":65301,"d2":14749,"dist":619},{"d1":65308,"d2":14749,"dist":316},{"d1":65312,"d2":14749,"dist":209},{"d1":65301,"d2":14749,"dist":618},{"d1":65308,"d2":14749,"dist":292},{"d1":65312,"d2":14749,"dist":250},{"d1":65301,"d2":14749,"dist":638},{"d1":65308,"d2":14749,"dist":269},{"d1":65312,"d2":14749,"dist":240},{"d1":65301,"d2":14749,"dist":672},{"d1":65308,"d2":14749,"dist":246},{"d1":65312,"d2":14749,"dist":262},{"d1":65301,"d2":14749,"dist":676},{"d1":65308,"d2":14749,"dist":224},{"d1":65312,"d2":14749,"dist":301},{"d1":65301,"d2":14749,"dist":700},{"d1":65308,"d2":14749,"dist":191},{"d1":65312,"d2":14749,"dist":320},{"d1":65301,"d2":14749,"dist":721},{"d1":65308,"d2":14749,"dist":165},{"d1":65312,"d2":14749,"dist":354},{"d1":65301,"d2":14749,"dist":738},{"d1":65308,"d2":14749,"dist":138},{"d1":65312,"d2":14749,"dist":365},{"d1":65301,"d2":14749,"dist":750},{"d1":65308,"d2":14749,"dist":117},{"d1":65312,"d2":14749,"dist":387},{"d1":65301,"d2":14749,"dist":760},{"d1":65308,"d2":14749,"dist":88},{"d1":65312,"d2":14749,"dist":417},{"d1":65301,"d2":14749,"dist":764},{"d1":65308,"d2":14749,"dist":66},{"d1":65312,"d2":14749,"dist":462},{"d1":65301,"d2":14749,"dist":759},{"d1":65308,"d2":14749,"dist":65},{"d1":65312,"d2":14749,"dist":522},{"d1":65301,"d2":14749,"dist":731},{"d1":65308,"d2":14749,"dist":100},{"d1":65312,"d2":14749,"dist":454},{"d1":65301,"d2":14749,"dist":700},{"d1":65308,"d2":14749,"dist":139},{"d1":65312,"d2":14749,"dist":448},{"d1":65301,"d2":14749,"dist":700},{"d1":65308,"d2":14749,"dist":183},{"d1":65312,"d2":14749,"dist":436},{"d1":65301,"d2":14749,"dist":624},{"d1":65308,"d2":14749,"dist":217},{"d1":65312,"d2":14749,"dist":396},{"d1":65301,"d2":14749,"dist":591},{"d1":65308,"d2":14749,"dist":246},{"d1":65312,"d2":14749,"dist":404},{"d1":65301,"d2":14749,"dist":564},{"d1":65308,"d2":14749,"dist":273},{"d1":65312,"d2":14749,"dist":401},{"d1":65301,"d2":14749,"dist":537},{"d1":65308,"d2":14749,"dist":300},{"d1":65312,"d2":14749,"dist":401},{"d1":65301,"d2":14749,"dist":513},{"d1":65308,"d2":14749,"dist":315},{"d1":65312,"d2":14749,"dist":411},{"d1":65301,"d2":14749,"dist":492},{"d1":65308,"d2":14749,"dist":396},{"d1":65312,"d2":14749,"dist":417},{"d1":65301,"d2":14749,"dist":460},{"d1":65308,"d2":14749,"dist":382},{"d1":65312,"d2":14749,"dist":428},{"d1":65301,"d2":14749,"dist":430},{"d1":65308,"d2":14749,"dist":416},{"d1":65312,"d2":14749,"dist":432},{"d1":65301,"d2":14749,"dist":402},{"d1":65308,"d2":14749,"dist":437},{"d1":65312,"d2":14749,"dist":442},{"d1":65301,"d2":14749,"dist":386},{"d1":65308,"d2":14749,"dist":443},{"d1":65312,"d2":14749,"dist":480},{"d1":65301,"d2":14749,"dist":358},{"d1":65308,"d2":14749,"dist":510},{"d1":65312,"d2":14749,"dist":579},{"d1":65301,"d2":14749,"dist":330},{"d1":65308,"d2":14749,"dist":509},{"d1":65312,"d2":14749,"dist":625},{"d1":65301,"d2":14749,"dist":290},{"d1":65308,"d2":14749,"dist":550},{"d1":65312,"d2":14749,"dist":617},{"d1":65301,"d2":14749,"dist":256},{"d1":65308,"d2":14749,"dist":585},{"d1":65312,"d2":14749,"dist":622},{"d1":65301,"d2":14749,"dist":242},{"d1":65308,"d2":14749,"dist":594},{"d1":65312,"d2":14749,"dist":681},{"d1":65301,"d2":14749,"dist":218},{"d1":65308,"d2":14749,"dist":614},{"d1":65312,"d2":14749,"dist":761},{"d1":65301,"d2":14749,"dist":187},{"d1":65308,"d2":14749,"dist":637},{"d1":65312,"d2":14749,"dist":860},{"d1":65301,"d2":14749,"dist":154},{"d1":65308,"d2":14749,"dist":665},{"d1":65312,"d2":14749,"dist":790},{"d1":65301,"d2":14749,"dist":117},{"d1":65308,"d2":14749,"dist":700},{"d1":65312,"d2":14749,"dist":604},{"d1":65301,"d2":14749,"dist":100},{"d1":65308,"d2":14749,"dist":712},{"d1":65312,"d2":14749,"dist":815},{"d1":65301,"d2":14749,"dist":78},{"d1":65308,"d2":14749,"dist":742},{"d1":65312,"d2":14749,"dist":631},{"d1":65301,"d2":14749,"dist":57},{"d1":65308,"d2":14749,"dist":762},{"d1":65312,"d2":14749,"dist":754},{"d1":65301,"d2":14749,"dist":54},{"d1":65308,"d2":14749,"dist":792},{"d1":65312,"d2":14749,"dist":744},{"d1":65301,"d2":14749,"dist":82},{"d1":65308,"d2":14749,"dist":947},{"d1":65312,"d2":14749,"dist":644},{"d1":65301,"d2":14749,"dist":101},{"d1":65308,"d2":14749,"dist":898},{"d1":65312,"d2":14749,"dist":723},{"d1":65301,"d2":14749,"dist":120},{"d1":65308,"d2":14749,"dist":815},{"d1":65312,"d2":14749,"dist":770},{"d1":65301,"d2":14749,"dist":141},{"d1":65308,"d2":14749,"dist":831},{"d1":65312,"d2":14749,"dist":775},{"d1":65301,"d2":14749,"dist":166},{"d1":65308,"d2":14749,"dist":839},{"d1":65312,"d2":14749,"dist":769},{"d1":65301,"d2":14749,"dist":201},{"d1":65308,"d2":14749,"dist":868},{"d1":65312,"d2":14749,"dist":666},{"d1":65301,"d2":14749,"dist":233},{"d1":65308,"d2":14749,"dist":1023},{"d1":65312,"d2":14749,"dist":631},{"d1":65301,"d2":14749,"dist":228},{"d1":65308,"d2":14749,"dist":881},{"d1":65312,"d2":14749,"dist":764},{"d1":65301,"d2":14749,"dist":240},{"d1":65308,"d2":14749,"dist":868},{"d1":65312,"d2":14749,"dist":631},{"d1":65301,"d2":14749,"dist":260},{"d1":65308,"d2":14749,"dist":871},{"d1":65312,"d2":14749,"dist":637},{"d1":65301,"d2":14749,"dist":278},{"d1":65308,"d2":14749,"dist":899},{"d1":65312,"d2":14749,"dist":665},{"d1":65301,"d2":14749,"dist":286},{"d1":65308,"d2":14749,"dist":916},{"d1":65312,"d2":14749,"dist":675},{"d1":65301,"d2":14749,"dist":286},{"d1":65308,"d2":14749,"dist":925},{"d1":65312,"d2":14749,"dist":668},{"d1":65301,"d2":14749,"dist":273},{"d1":65308,"d2":14749,"dist":937},{"d1":65312,"d2":14749,"dist":673},{"d1":65301,"d2":14749,"dist":274},{"d1":65308,"d2":14749,"dist":953},{"d1":65312,"d2":14749,"dist":742},{"d1":65301,"d2":14749,"dist":271},{"d1":65308,"d2":14749,"dist":965},{"d1":65312,"d2":14749,"dist":727},{"d1":65301,"d2":14749,"dist":266},{"d1":65308,"d2":14749,"dist":963},{"d1":65312,"d2":14749,"dist":797},{"d1":65301,"d2":14749,"dist":260},{"d1":65308,"d2":14749,"dist":975},{"d1":65312,"d2":14749,"dist":801},{"d1":65301,"d2":14749,"dist":270},{"d1":65308,"d2":14749,"dist":978},{"d1":65312,"d2":14749,"dist":792},{"d1":65301,"d2":14749,"dist":259},{"d1":65308,"d2":14749,"dist":978},{"d1":65312,"d2":14749,"dist":765},{"d1":65301,"d2":14749,"dist":256},{"d1":65308,"d2":14749,"dist":995},{"d1":65312,"d2":14749,"dist":767},{"d1":65301,"d2":14749,"dist":245},{"d1":65308,"d2":14749,"dist":975},{"d1":65312,"d2":14749,"dist":863},{"d1":65301,"d2":14749,"dist":293},{"d1":65308,"d2":14749,"dist":976},{"d1":65312,"d2":14749,"dist":897},{"d1":65301,"d2":14749,"dist":220},{"d1":65308,"d2":14749,"dist":976},{"d1":65312,"d2":14749,"dist":901},{"d1":65301,"d2":14749,"dist":258},{"d1":65308,"d2":14749,"dist":997},{"d1":65312,"d2":14749,"dist":934},{"d1":65301,"d2":14749,"dist":220},{"d1":65308,"d2":14749,"dist":1004},{"d1":65312,"d2":14749,"dist":931},{"d1":65301,"d2":14749,"dist":227},{"d1":65308,"d2":14749,"dist":994},{"d1":65312,"d2":14749,"dist":924},{"d1":65301,"d2":14749,"dist":248},{"d1":65308,"d2":14749,"dist":1039},{"d1":65312,"d2":14749,"dist":922},{"d1":65301,"d2":14749,"dist":236},{"d1":65308,"d2":14749,"dist":981},{"d1":65312,"d2":14749,"dist":816},{"d1":65301,"d2":14749,"dist":294},{"d1":65308,"d2":14749,"dist":984},{"d1":65312,"d2":14749,"dist":783},{"d1":65301,"d2":14749,"dist":310},{"d1":65308,"d2":14749,"dist":981},{"d1":65312,"d2":14749,"dist":804},{"d1":65301,"d2":14749,"dist":260},{"d1":65308,"d2":14749,"dist":980},{"d1":65312,"d2":14749,"dist":799},{"d1":65301,"d2":14749,"dist":262},{"d1":65308,"d2":14749,"dist":990},{"d1":65312,"d2":14749,"dist":765},{"d1":65301,"d2":14749,"dist":259},{"d1":65308,"d2":14749,"dist":978},{"d1":65312,"d2":14749,"dist":759},{"d1":65301,"d2":14749,"dist":261},{"d1":65308,"d2":14749,"dist":961},{"d1":65312,"d2":14749,"dist":757},{"d1":65301,"d2":14749,"dist":259},{"d1":65308,"d2":14749,"dist":964},{"d1":65312,"d2":14749,"dist":724},{"d1":65301,"d2":14749,"dist":261},{"d1":65308,"d2":14749,"dist":949},{"d1":65312,"d2":14749,"dist":704},{"d1":65301,"d2":14749,"dist":251},{"d1":65308,"d2":14749,"dist":911},{"d1":65312,"d2":14749,"dist":670},{"d1":65301,"d2":14749,"dist":242},{"d1":65308,"d2":14749,"dist":897},{"d1":65312,"d2":14749,"dist":649},{"d1":65301,"d2":14749,"dist":232},{"d1":65308,"d2":14749,"dist":874},{"d1":65312,"d2":14749,"dist":636},{"d1":65301,"d2":14749,"dist":221},{"d1":65308,"d2":14749,"dist":871},{"d1":65312,"d2":14749,"dist":615},{"d1":65301,"d2":14749,"dist":218},{"d1":65308,"d2":14749,"dist":837},{"d1":65312,"d2":14749,"dist":599},{"d1":65301,"d2":14749,"dist":202},{"d1":65308,"d2":14749,"dist":819},{"d1":65312,"d2":14749,"dist":634},{"d1":65301,"d2":14749,"dist":201},{"d1":65308,"d2":14749,"dist":795},{"d1":65312,"d2":14749,"dist":592},{"d1":65301,"d2":14749,"dist":188},{"d1":65308,"d2":14749,"dist":779},{"d1":65312,"d2":14749,"dist":615},{"d1":65301,"d2":14749,"dist":179},{"d1":65308,"d2":14749,"dist":756},{"d1":65312,"d2":14749,"dist":570},{"d1":65301,"d2":14749,"dist":175},{"d1":65308,"d2":14749,"dist":731},{"d1":65312,"d2":14749,"dist":538},{"d1":65301,"d2":14749,"dist":170},{"d1":65308,"d2":14749,"dist":727},{"d1":65312,"d2":14749,"dist":519},{"d1":65301,"d2":14749,"dist":172},{"d1":65308,"d2":14749,"dist":710},{"d1":65312,"d2":14749,"dist":551},{"d1":65301,"d2":14749,"dist":162},{"d1":65308,"d2":14749,"dist":688},{"d1":65312,"d2":14749,"dist":521},{"d1":65301,"d2":14749,"dist":169},{"d1":65308,"d2":14749,"dist":680},{"d1":65312,"d2":14749,"dist":504},{"d1":65301,"d2":14749,"dist":183},{"d1":65308,"d2":14749,"dist":657},{"d1":65312,"d2":14749,"dist":499},{"d1":65301,"d2":14749,"dist":209},{"d1":65308,"d2":14749,"dist":639},{"d1":65312,"d2":14749,"dist":496},{"d1":65301,"d2":14749,"dist":242},{"d1":65308,"d2":14749,"dist":618},{"d1":65312,"d2":14749,"dist":488},{"d1":65301,"d2":14749,"dist":273},{"d1":65308,"d2":14749,"dist":599},{"d1":65312,"d2":14749,"dist":495},{"d1":65301,"d2":14749,"dist":295},{"d1":65308,"d2":14749,"dist":570},{"d1":65312,"d2":14749,"dist":483},{"d1":65301,"d2":14749,"dist":284},{"d1":65308,"d2":14749,"dist":558},{"d1":65312,"d2":14749,"dist":483},{"d1":65301,"d2":14749,"dist":308},{"d1":65308,"d2":14749,"dist":539},{"d1":65312,"d2":14749,"dist":471},{"d1":65301,"d2":14749,"dist":325},{"d1":65308,"d2":14749,"dist":514},{"d1":65312,"d2":14749,"dist":483},{"d1":65301,"d2":14749,"dist":360},{"d1":65308,"d2":14749,"dist":506},{"d1":65312,"d2":14749,"dist":487},{"d1":65301,"d2":14749,"dist":375},{"d1":65308,"d2":14749,"dist":488},{"d1":65312,"d2":14749,"dist":497},{"d1":65301,"d2":14749,"dist":389},{"d1":65308,"d2":14749,"dist":469},{"d1":65312,"d2":14749,"dist":496},{"d1":65301,"d2":14749,"dist":398},{"d1":65308,"d2":14749,"dist":465},{"d1":65312,"d2":14749,"dist":509},{"d1":65301,"d2":14749,"dist":466},{"d1":65308,"d2":14749,"dist":465},{"d1":65312,"d2":14749,"dist":528},{"d1":65301,"d2":14749,"dist":435},{"d1":65308,"d2":14749,"dist":458},{"d1":65312,"d2":14749,"dist":549},{"d1":65301,"d2":14749,"dist":456},{"d1":65308,"d2":14749,"dist":457},{"d1":65312,"d2":14749,"dist":554},{"d1":65301,"d2":14749,"dist":468},{"d1":65308,"d2":14749,"dist":449},{"d1":65312,"d2":14749,"dist":564},{"d1":65301,"d2":14749,"dist":507},{"d1":65308,"d2":14749,"dist":430},{"d1":65312,"d2":14749,"dist":583},{"d1":65301,"d2":14749,"dist":523},{"d1":65308,"d2":14749,"dist":425},{"d1":65312,"d2":14749,"dist":595},{"d1":65301,"d2":14749,"dist":542},{"d1":65308,"d2":14749,"dist":422},{"d1":65312,"d2":14749,"dist":601},{"d1":65301,"d2":14749,"dist":558},{"d1":65308,"d2":14749,"dist":379},{"d1":65312,"d2":14749,"dist":586},{"d1":65301,"d2":14749,"dist":595},{"d1":65308,"d2":14749,"dist":359},{"d1":65312,"d2":14749,"dist":579},{"d1":65301,"d2":14749,"dist":583},{"d1":65308,"d2":14749,"dist":357},{"d1":65312,"d2":14749,"dist":558},{"d1":65301,"d2":14749,"dist":587},{"d1":65308,"d2":14749,"dist":318},{"d1":65312,"d2":14749,"dist":533},{"d1":65301,"d2":14749,"dist":585},{"d1":65308,"d2":14749,"dist":291},{"d1":65312,"d2":14749,"dist":511},{"d1":65301,"d2":14749,"dist":588},{"d1":65308,"d2":14749,"dist":283},{"d1":65312,"d2":14749,"dist":485},{"d1":65301,"d2":14749,"dist":579},{"d1":65308,"d2":14749,"dist":278},{"d1":65312,"d2":14749,"dist":463},{"d1":65301,"d2":14749,"dist":573},{"d1":65308,"d2":14749,"dist":275},{"d1":65312,"d2":14749,"dist":445},{"d1":65301,"d2":14749,"dist":560},{"d1":65308,"d2":14749,"dist":271},{"d1":65312,"d2":14749,"dist":430},{"d1":65301,"d2":14749,"dist":561},{"d1":65308,"d2":14749,"dist":264},{"d1":65312,"d2":14749,"dist":413},{"d1":65301,"d2":14749,"dist":567},{"d1":65308,"d2":14749,"dist":256},{"d1":65312,"d2":14749,"dist":388},{"d1":65301,"d2":14749,"dist":573},{"d1":65308,"d2":14749,"dist":243},{"d1":65312,"d2":14749,"dist":380},{"d1":65301,"d2":14749,"dist":588},{"d1":65308,"d2":14749,"dist":228},{"d1":65312,"d2":14749,"dist":379},{"d1":65301,"d2":14749,"dist":601},{"d1":65308,"d2":14749,"dist":220},{"d1":65312,"d2":14749,"dist":374},{"d1":65301,"d2":14749,"dist":621},{"d1":65308,"d2":14749,"dist":210},{"d1":65312,"d2":14749,"dist":359},{"d1":65301,"d2":14749,"dist":641},{"d1":65308,"d2":14749,"dist":191},{"d1":65312,"d2":14749,"dist":369},{"d1":65301,"d2":14749,"dist":647},{"d1":65308,"d2":14749,"dist":179},{"d1":65312,"d2":14749,"dist":371},{"d1":65301,"d2":14749,"dist":671},{"d1":65308,"d2":14749,"dist":165},{"d1":65312,"d2":14749,"dist":376},{"d1":65301,"d2":14749,"dist":679},{"d1":65308,"d2":14749,"dist":150},{"d1":65312,"d2":14749,"dist":390},{"d1":65301,"d2":14749,"dist":853},{"d1":65308,"d2":14749,"dist":143},{"d1":65312,"d2":14749,"dist":375},{"d1":65301,"d2":14749,"dist":691},{"d1":65308,"d2":14749,"dist":139},{"d1":65312,"d2":14749,"dist":372},{"d1":65301,"d2":14749,"dist":692},{"d1":65308,"d2":14749,"dist":151},{"d1":65312,"d2":14749,"dist":360},{"d1":65301,"d2":14749,"dist":696},{"d1":65308,"d2":14749,"dist":154},{"d1":65312,"d2":14749,"dist":360},{"d1":65301,"d2":14749,"dist":694},{"d1":65308,"d2":14749,"dist":170},{"d1":65312,"d2":14749,"dist":342},{"d1":65301,"d2":14749,"dist":683},{"d1":65308,"d2":14749,"dist":186},{"d1":65312,"d2":14749,"dist":332},{"d1":65301,"d2":14749,"dist":662},{"d1":65308,"d2":14749,"dist":269},{"d1":65312,"d2":14749,"dist":321},{"d1":65301,"d2":14749,"dist":662},{"d1":65308,"d2":14749,"dist":222},{"d1":65312,"d2":14749,"dist":314},{"d1":65301,"d2":14749,"dist":616},{"d1":65308,"d2":14749,"dist":231},{"d1":65312,"d2":14749,"dist":310},{"d1":65301,"d2":14749,"dist":613},{"d1":65308,"d2":14749,"dist":260},{"d1":65312,"d2":14749,"dist":317},{"d1":65301,"d2":14749,"dist":581},{"d1":65308,"d2":14749,"dist":269},{"d1":65312,"d2":14749,"dist":301},{"d1":65301,"d2":14749,"dist":566},{"d1":65308,"d2":14749,"dist":289},{"d1":65312,"d2":14749,"dist":294},{"d1":65301,"d2":14749,"dist":547},{"d1":65308,"d2":14749,"dist":300},{"d1":65312,"d2":14749,"dist":290},{"d1":65301,"d2":14749,"dist":538},{"d1":65308,"d2":14749,"dist":322},{"d1":65312,"d2":14749,"dist":287},{"d1":65301,"d2":14749,"dist":527},{"d1":65308,"d2":14749,"dist":357},{"d1":65312,"d2":14749,"dist":287},{"d1":65301,"d2":14749,"dist":510},{"d1":65308,"d2":14749,"dist":342},{"d1":65312,"d2":14749,"dist":281},{"d1":65301,"d2":14749,"dist":513},{"d1":65308,"d2":14749,"dist":363},{"d1":65312,"d2":14749,"dist":271},{"d1":65301,"d2":14749,"dist":492},{"d1":65308,"d2":14749,"dist":378},{"d1":65312,"d2":14749,"dist":275},{"d1":65301,"d2":14749,"dist":461},{"d1":65308,"d2":14749,"dist":402},{"d1":65312,"d2":14749,"dist":277},{"d1":65301,"d2":14749,"dist":449},{"d1":65308,"d2":14749,"dist":419},{"d1":65312,"d2":14749,"dist":293},{"d1":65301,"d2":14749,"dist":434},{"d1":65308,"d2":14749,"dist":424},{"d1":65312,"d2":14749,"dist":314},{"d1":65301,"d2":14749,"dist":415},{"d1":65308,"d2":14749,"dist":447},{"d1":65312,"d2":14749,"dist":336},{"d1":65301,"d2":14749,"dist":417},{"d1":65308,"d2":14749,"dist":438},{"d1":65312,"d2":14749,"dist":364},{"d1":65301,"d2":14749,"dist":400},{"d1":65308,"d2":14749,"dist":430},{"d1":65312,"d2":14749,"dist":385},{"d1":65301,"d2":14749,"dist":408},{"d1":65308,"d2":14749,"dist":420},{"d1":65312,"d2":14749,"dist":397},{"d1":65301,"d2":14749,"dist":417},{"d1":65308,"d2":14749,"dist":407},{"d1":65312,"d2":14749,"dist":402},{"d1":65301,"d2":14749,"dist":429},{"d1":65308,"d2":14749,"dist":400},{"d1":65312,"d2":14749,"dist":387},{"d1":65301,"d2":14749,"dist":435},{"d1":65308,"d2":14749,"dist":413},{"d1":65312,"d2":14749,"dist":373},{"d1":65301,"d2":14749,"dist":430},{"d1":65308,"d2":14749,"dist":418},{"d1":65312,"d2":14749,"dist":359},{"d1":65301,"d2":14749,"dist":449},{"d1":65308,"d2":14749,"dist":423},{"d1":65312,"d2":14749,"dist":339},{"d1":65301,"d2":14749,"dist":452},{"d1":65308,"d2":14749,"dist":436},{"d1":65312,"d2":14749,"dist":333},{"d1":65301,"d2":14749,"dist":447},{"d1":65308,"d2":14749,"dist":397},{"d1":65312,"d2":14749,"dist":320},{"d1":65301,"d2":14749,"dist":460},{"d1":65308,"d2":14749,"dist":377},{"d1":65312,"d2":14749,"dist":307},{"d1":65301,"d2":14749,"dist":481},{"d1":65308,"d2":14749,"dist":357},{"d1":65312,"d2":14749,"dist":294},{"d1":65301,"d2":14749,"dist":495},{"d1":65308,"d2":14749,"dist":340},{"d1":65312,"d2":14749,"dist":300},{"d1":65301,"d2":14749,"dist":524},{"d1":65308,"d2":14749,"dist":317},{"d1":65312,"d2":14749,"dist":283},{"d1":65301,"d2":14749,"dist":540},{"d1":65308,"d2":14749,"dist":302},{"d1":65312,"d2":14749,"dist":277},{"d1":65301,"d2":14749,"dist":558},{"d1":65308,"d2":14749,"dist":300},{"d1":65312,"d2":14749,"dist":261},{"d1":65301,"d2":14749,"dist":586},{"d1":65308,"d2":14749,"dist":283},{"d1":65312,"d2":14749,"dist":256},{"d1":65301,"d2":14749,"dist":592},{"d1":65308,"d2":14749,"dist":285},{"d1":65312,"d2":14749,"dist":240},{"d1":65301,"d2":14749,"dist":604},{"d1":65308,"d2":14749,"dist":293},{"d1":65312,"d2":14749,"dist":223},{"d1":65301,"d2":14749,"dist":611},{"d1":65308,"d2":14749,"dist":304},{"d1":65312,"d2":14749,"dist":212},{"d1":65301,"d2":14749,"dist":631},{"d1":65308,"d2":14749,"dist":320},{"d1":65312,"d2":14749,"dist":182},{"d1":65301,"d2":14749,"dist":676},{"d1":65308,"d2":14749,"dist":327},{"d1":65312,"d2":14749,"dist":164},{"d1":65301,"d2":14749,"dist":660},{"d1":65308,"d2":14749,"dist":348},{"d1":65312,"d2":14749,"dist":149},{"d1":65301,"d2":14749,"dist":619},{"d1":65308,"d2":14749,"dist":372},{"d1":65312,"d2":14749,"dist":132},{"d1":65301,"d2":14749,"dist":610},{"d1":65308,"d2":14749,"dist":400},{"d1":65312,"d2":14749,"dist":130},{"d1":65301,"d2":14749,"dist":601},{"d1":65308,"d2":14749,"dist":400},{"d1":65312,"d2":14749,"dist":128},{"d1":65301,"d2":14749,"dist":596},{"d1":65308,"d2":14749,"dist":393},{"d1":65312,"d2":14749,"dist":124},{"d1":65301,"d2":14749,"dist":579},{"d1":65308,"d2":14749,"dist":425},{"d1":65312,"d2":14749,"dist":112},{"d1":65301,"d2":14749,"dist":566},{"d1":65308,"d2":14749,"dist":434},{"d1":65312,"d2":14749,"dist":112},{"d1":65301,"d2":14749,"dist":556},{"d1":65308,"d2":14749,"dist":438},{"d1":65312,"d2":14749,"dist":116},{"d1":65301,"d2":14749,"dist":562},{"d1":65308,"d2":14749,"dist":436},{"d1":65312,"d2":14749,"dist":100},{"d1":65301,"d2":14749,"dist":579},{"d1":65308,"d2":14749,"dist":435},{"d1":65312,"d2":14749,"dist":94},{"d1":65301,"d2":14749,"dist":576},{"d1":65308,"d2":14749,"dist":431},{"d1":65312,"d2":14749,"dist":87},{"d1":65301,"d2":14749,"dist":581},{"d1":65308,"d2":14749,"dist":436},{"d1":65312,"d2":14749,"dist":79},{"d1":65301,"d2":14749,"dist":583},{"d1":65308,"d2":14749,"dist":434},{"d1":65312,"d2":14749,"dist":80},{"d1":65301,"d2":14749,"dist":587},{"d1":65308,"d2":14749,"dist":436},{"d1":65312,"d2":14749,"dist":79},{"d1":65301,"d2":14749,"dist":573},{"d1":65308,"d2":14749,"dist":443},{"d1":65312,"d2":14749,"dist":84},{"d1":65301,"d2":14749,"dist":567},{"d1":65308,"d2":14749,"dist":455},{"d1":65312,"d2":14749,"dist":95},{"d1":65301,"d2":14749,"dist":574},{"d1":65308,"d2":14749,"dist":457},{"d1":65312,"d2":14749,"dist":100},{"d1":65301,"d2":14749,"dist":573},{"d1":65308,"d2":14749,"dist":477},{"d1":65312,"d2":14749,"dist":98},{"d1":65301,"d2":14749,"dist":594},{"d1":65308,"d2":14749,"dist":520},{"d1":65312,"d2":14749,"dist":93},{"d1":65301,"d2":14749,"dist":636},{"d1":65308,"d2":14749,"dist":495},{"d1":65312,"d2":14749,"dist":90},{"d1":65301,"d2":14749,"dist":571},{"d1":65308,"d2":14749,"dist":487},{"d1":65312,"d2":14749,"dist":86},{"d1":65301,"d2":14749,"dist":584},{"d1":65308,"d2":14749,"dist":489},{"d1":65312,"d2":14749,"dist":84},{"d1":65301,"d2":14749,"dist":583},{"d1":65308,"d2":14749,"dist":483},{"d1":65312,"d2":14749,"dist":90},{"d1":65301,"d2":14749,"dist":576}];

        var sendingInterval = null;
        var start = 0, stop = 3;
        socket.onopen = function () {
        	console.log('connection opened');
        	isConnectionOpen = true;
        	sendingInterval = setInterval(function() {
        		if (stop > distances.length) {
        			clearInterval(sendingInterval);
        			return;
                }
                console.log("sending x, y ", JSON.stringify(distances.slice(start, stop)));
		        socket.send(JSON.stringify(distances.slice(start, stop)));
        		start += 3;
        		stop += 3;
            }, 1000);
//			for (var i = 0; i < distances.length; i++) {
//				socket.send(JSON.stringify(distances[i]));
//			}
//        	for(var i = 0; i < coordinates.length; i++) {
//		        for(var j = 0; j < getDistances(coordinates[i].x, coordinates[i].y).length; j++) {
//			        socket.send(JSON.stringify(getDistances(coordinates[i].x, coordinates[i].y)[j]));
//		        }
//	        }
        };

        socket.onclose = function() {
        	console.log('connection closed');
        	isConnectionOpen = false;
        };

        socket.onmessage = function (msg) {
        	console.log(msg)
            var message = JSON.parse(msg.data);
//            color = message.color;
//            console.log('new color is: ', color)
        };

        var $container = $('#container');
//        $container.on('click', function (evt) {
//            if (!isConnectionOpen) {
//                return;
//            }
//            var $el = $('<div class="square"></div>');
//            $el.addClass(color);
//            $el.css({
//                'left': evt.pageX,
//                'top': evt.pageY
//            });
//            $container.append($el);
//            message.x = evt.pageX;
//            message.y = evt.pageY;
//            socket.send(JSON.stringify(message));
//        });
    });
</script>
</html>