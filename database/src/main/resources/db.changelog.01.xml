<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
	<changeSet author="kgebert (generated)" id="issue-89-1">
		<createTable tableName="Building">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="BuildingPK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="name" type="VARCHAR(255)"/>
			<column name="complex_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-89-2">
		<createTable tableName="Complex">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="ComplexPK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="name" type="VARCHAR(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-89-3">
		<createTable tableName="Floor">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="FloorPK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="level" type="INT"/>
			<column name="building_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-89-7">
		<addForeignKeyConstraint baseColumnNames="complex_id" baseTableName="Building" constraintName="FK_428m38a3fvrkr0l6lt37nr7sg" deferrable="false"
		                         initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Complex"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-89-8">
		<addForeignKeyConstraint baseColumnNames="building_id" baseTableName="Floor" constraintName="FK_5rv574h45qi1a16kefmy9juof" deferrable="false"
		                         initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Building"/>
	</changeSet>
	<changeSet author="pkuzmicki (generated)" id="issue-80-1">
		<createTable tableName="Anchor">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="AnchorPK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="name" type="VARCHAR(255)"/>
			<column name="shortId" type="INT">
				<constraints nullable="false"/>
			</column>
			<column name="longId" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="x" type="DOUBLE">
				<constraints nullable="false"/>
			</column>
			<column name="y" type="DOUBLE">
				<constraints nullable="false"/>
			</column>
			<column name="floor_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="pkuzmicki (generated)" id="issue-80-2">
		<addForeignKeyConstraint baseColumnNames="floor_id" baseTableName="Anchor" constraintName="FK_gtwmd57hn5sf1q3c7ysdwp2db" deferrable="false"
		                         initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="pkuzmicki (generated)" id="issue-80-3">
		<addUniqueConstraint columnNames="shortId" constraintName="unique_shortId" tableName="Anchor"/>
	</changeSet>
	<changeSet author="pkuzmicki (generated)" id="issue-80-4">
		<addUniqueConstraint columnNames="longId" constraintName="unique_longId" tableName="Anchor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-102-1">
		<addColumn tableName="Anchor">
			<column name="verified" type="boolean"/>
		</addColumn>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-100-1">
		<addColumn tableName="Floor">
			<column name="name" type="varchar(255)"/>
		</addColumn>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-100-2">
		<addUniqueConstraint columnNames="level, building_id" constraintName="unique_level_building_id" tableName="Floor"/>
	</changeSet>

</databaseChangeLog>
