<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
	<changeSet author="kgebert (generated)" id="issue-89-1">
		<createTable tableName="Building">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="BuildingPK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="name" type="VARCHAR(255)"/>
			<column name="complex_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-89-2">
		<createTable tableName="Complex">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="ComplexPK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="name" type="VARCHAR(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-89-3">
		<createTable tableName="Floor">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="FloorPK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="level" type="INT"/>
			<column name="building_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-89-7">
		<addForeignKeyConstraint baseColumnNames="complex_id" baseTableName="Building" constraintName="FK_428m38a3fvrkr0l6lt37nr7sg" deferrable="false"
		                         initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Complex"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-89-8">
		<addForeignKeyConstraint baseColumnNames="building_id" baseTableName="Floor" constraintName="FK_5rv574h45qi1a16kefmy9juof" deferrable="false"
		                         initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Building"/>
	</changeSet>
	<changeSet author="pkuzmicki (generated)" id="issue-80-1">
		<createTable tableName="Anchor">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="AnchorPK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="name" type="VARCHAR(255)"/>
			<column name="shortId" type="INT"/>
			<column name="longId" type="BIGINT"/>
			<column name="x" type="DOUBLE"/>
			<column name="y" type="DOUBLE"/>
			<column name="floor_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="pkuzmicki (generated)" id="issue-80-2">
		<addForeignKeyConstraint baseColumnNames="floor_id" baseTableName="Anchor" constraintName="FK_gtwmd57hn5sf1q3c7ysdwp2db" deferrable="false"
		                         initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="pkuzmicki (generated)" id="issue-80-3">
		<addUniqueConstraint columnNames="shortId" constraintName="unique_shortId" tableName="Anchor"/>
	</changeSet>
	<changeSet author="pkuzmicki (generated)" id="issue-80-4">
		<addUniqueConstraint columnNames="longId" constraintName="unique_longId" tableName="Anchor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="issue-102-1">
		<addColumn tableName="Anchor">
			<column name="verified" type="boolean"/>
		</addColumn>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-100-1">
		<addColumn tableName="Floor">
			<column name="name" type="varchar(255)"/>
		</addColumn>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-100-2">
		<addUniqueConstraint columnNames="level, building_id" constraintName="unique_level_building_id" tableName="Floor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-1">
		<createTable tableName="Device">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="DevicePK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="longId" type="BIGINT"/>
			<column name="name" type="VARCHAR(255)"/>
			<column name="shortId" type="INT"/>
			<column name="floor_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-2">
		<addUniqueConstraint columnNames="longId" constraintName="unique_longId" tableName="Device"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue81-3">
		<addUniqueConstraint columnNames="shortId" constraintName="unique_shortId" tableName="Device"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-4">
		<createTable tableName="Tag">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="TagPK"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-5">
		<addForeignKeyConstraint
			baseColumnNames="id" baseTableName="Tag" constraintName="Tag_Device_Id"
			referencedColumnNames="id" referencedTableName="Device"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-6">
		<addForeignKeyConstraint
			baseColumnNames="id" baseTableName="Anchor" constraintName="Anchor_Device_Id"
             referencedColumnNames="id" referencedTableName="Device"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-7">
		<addForeignKeyConstraint
			onDelete="SET NULL"
			baseColumnNames="floor_id" baseTableName="Device" constraintName="Device_Floor_Id"
            referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-8">
		<dropForeignKeyConstraint baseTableName="anchor" constraintName="FK_gtwmd57hn5sf1q3c7ysdwp2db"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-9">
		<dropUniqueConstraint constraintName="unique_longId" tableName="anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-10">
		<dropUniqueConstraint constraintName="unique_shortId" tableName="anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-11">
		<dropColumn columnName="creationDate" tableName="anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-12">
		<dropColumn columnName="modificationDate" tableName="anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-13">
		<dropColumn columnName="shortId" tableName="anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-14">
		<dropColumn columnName="longId" tableName="anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-15">
		<dropColumn columnName="name" tableName="anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-16">
		<dropColumn columnName="floor_id" tableName="anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-17">
		<dropNotNullConstraint columnDataType="double" columnName="x" tableName="Anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-18">
		<dropNotNullConstraint columnDataType="double" columnName="y" tableName="Anchor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-19">
		<addColumn tableName="Device">
			<column name="verified" type="boolean"/>
		</addColumn>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-81-20">
		<dropColumn columnName="verified" tableName="anchor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1489506078970-1">
		<createTable tableName="Coordinates">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="CoordinatesPK" />
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="device" type="VARCHAR(255)"/>
			<column name="x" type="DOUBLE"/>
			<column name="y" type="DOUBLE"/>
		</createTable>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-111-1">
		<createTable tableName="Image">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="ImagePK"/>
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="bitmap" type="BLOB"/>
			<column name="bitmapHeight" type="INT"/>
			<column name="bitmapWidth" type="INT"/>
			<column name="floor_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-111-2">
		<addForeignKeyConstraint baseColumnNames="floor_id" baseTableName="Image" constraintName="FK_3m9vugkgfmxx2ulfe0jb6gdye" deferrable="false"
		                         initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-111-3">
		<addColumn tableName="Floor">
			<column name="image_id" type="bigint"/>
		</addColumn>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-111-4">
		<addForeignKeyConstraint baseColumnNames="image_id" baseTableName="Floor" constraintName="FK_6u98qhbox47qemgykogk61gt" deferrable="false"
		                         initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Image"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-111-5">
		<dropForeignKeyConstraint baseTableName="image" constraintName="FK_3m9vugkgfmxx2ulfe0jb6gdye"/>
	</changeSet>
	<changeSet author="jsmol (generated)" id="issue-111-6">
		<dropColumn columnName="floor_id" tableName="image"/>
	</changeSet>
	<changeSet author="kgebert" id="issue-111-7">
		<modifyDataType tableName="image" columnName="bitmap" newDataType="mediumblob" />
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-59-1">
		<createTable tableName="Scale">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="ScalePK" />
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="measure" type="VARCHAR(255)"/>
			<column name="realDistanceInCentimeters" type="INT">
				<constraints nullable="false"/>
			</column>
			<column name="startX" type="INT">
				<constraints nullable="false"/>
			</column>
			<column name="startY" type="INT">
				<constraints nullable="false"/>
			</column>
			<column name="stopX" type="INT">
				<constraints nullable="false"/>
			</column>
			<column name="stopY" type="INT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-59-2">
		<addColumn tableName="Floor">
			<column name="scale_id" type="bigint"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-59-3">
		<addForeignKeyConstraint onUpdate="CASCADE" onDelete="CASCADE" baseColumnNames="scale_id" baseTableName="Floor" constraintName="FK_Floor_Scale_Id" referencedColumnNames="id" referencedTableName="Scale"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-128-1">
		<createTable tableName="Sink">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="SinkPK" />
			</column>
			<column name="configured" type="BIT(1)">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-128-2">
		<addForeignKeyConstraint baseColumnNames="id" baseTableName="Sink" constraintName="FK_Sink_Anchor_Id" referencedColumnNames="id" referencedTableName="Anchor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-128-3">
		<addColumn tableName="Anchor">
			<column name="sink_id" type="bigint"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-128-4">
		<addForeignKeyConstraint onDelete="SET NULL" baseColumnNames="sink_id" baseTableName="Anchor" constraintName="FK_Anchor_Sink_Id" referencedColumnNames="id" referencedTableName="Sink"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496754768263-1">
		<createTable tableName="Area">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="AreaPK" />
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="polygon" type="POLYGON"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496842280369-1">
		<createTable tableName="AreaConfiguration">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="AreaConfigurationPK" />
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="mode" type="VARCHAR(255)"/>
			<column name="offset" type="INT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496842280369-2">
		<createTable tableName="AreaConfiguration_Tag">
			<column name="areaConfiguration_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="tags_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496842280369-3">
		<createTable tableName="Area_AreaConfiguration">
			<column name="area_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="configurations_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496842280369-4">
		<addColumn tableName="Area">
			<column name="name" type="varchar(255)"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496842280369-9">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="area_id" baseTableName="Area_AreaConfiguration" constraintName="FK_Area_AreaConfiguration_Area_Id" referencedColumnNames="id" referencedTableName="Area"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496842280369-10">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="tags_id" baseTableName="AreaConfiguration_Tag" constraintName="FK_AreaConfiguration_Tag_Id" referencedColumnNames="id" referencedTableName="Tag"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496842280369-11">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="areaConfiguration_id" baseTableName="AreaConfiguration_Tag" constraintName="FK_AreaConfiguration_Tag_AreaConfiguration_Id" referencedColumnNames="id" referencedTableName="AreaConfiguration"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="1496842280369-12">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="configurations_id" baseTableName="Area_AreaConfiguration" constraintName="FK_Area_AreaConfiguration_Configuration_Id" referencedColumnNames="id" referencedTableName="AreaConfiguration"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-1">
		<createTable tableName="User">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="UserPK" />
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="password" type="VARCHAR(255)"/>
			<column name="salt" type="VARCHAR(255)"/>
			<column name="token" type="VARCHAR(255)"/>
			<column name="tokenExpires" type="timestamp"/>
			<column name="username" type="VARCHAR(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-2">
		<addUniqueConstraint columnNames="username" constraintName="unique_username" tableName="User"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-3">
		<createTable tableName="Permission">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="PermissionPK" />
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="name" type="VARCHAR(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-4">
		<createTable tableName="PermissionGroup">
			<column name="id" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" primaryKeyName="PermissionGroupPK" />
			</column>
			<column name="creationDate" type="timestamp"/>
			<column name="modificationDate" type="timestamp"/>
			<column name="name" type="varchar(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-5">
		<createTable tableName="PermissionGroup_Permission">
			<column name="permissionGroup_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="permissions_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-6">
		<createTable tableName="User_PermissionGroup">
			<column name="user_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="permissionGroups_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-7">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="permissionGroups_id" baseTableName="User_PermissionGroup" constraintName="FK_User_PermissionGroup_Id" referencedColumnNames="id" referencedTableName="PermissionGroup"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-8">
		<addForeignKeyConstraint baseColumnNames="permissions_id" baseTableName="PermissionGroup_Permission" constraintName="FK_PermissionGroup_Permission_Id" referencedColumnNames="id" referencedTableName="Permission"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-9">
		<addForeignKeyConstraint baseColumnNames="user_id" baseTableName="User_PermissionGroup" constraintName="FK_PermissionGroup_User_Id" referencedColumnNames="id" referencedTableName="User"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-10">
		<addForeignKeyConstraint baseColumnNames="permissionGroup_id" baseTableName="PermissionGroup_Permission" constraintName="FK_Permission_PermissionGroup_Id" referencedColumnNames="id" referencedTableName="PermissionGroup"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-77-11">
		<addColumn tableName="User">
			<column name="superUser" type="bit">
				<constraints nullable="false"/>
			</column>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-73-1">
		<createTable tableName="Configuration">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints nullable="false" primaryKey="true" primaryKeyName="ConfigurationPK" />
			</column>
			<column name="creationDate" type="datetime"/>
			<column name="modificationDate" type="datetime"/>
			<column name="data" type="LONGTEXT"/>
			<column name="version" type="INT"/>
			<column name="floor_id" type="bigint"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-73-2">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="floor_id" baseTableName="Configuration" constraintName="FK_Configuration_Floor_Id" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-149-1">
		<addColumn tableName="Configuration">
			<column name="published" type="bit"/>
		</addColumn>
	</changeSet>

	<changeSet author="kgebert (generated)" id="navi-142-1">
		<createTable tableName="Publication">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="PublicationPK"/>
			</column>
			<column name="creationDate" type="datetime"/>
			<column name="modificationDate" type="datetime"/>
			<column name="floor_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-142-2">
		<createTable tableName="Publication_Tag">
			<column name="Publication_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="tags_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-142-3">
		<createTable tableName="Publication_User">
			<column name="Publication_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="users_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-142-6">
		<addForeignKeyConstraint baseColumnNames="Publication_id" baseTableName="Publication_User" constraintName="FK_PublicationUser_Publication_Id" referencedColumnNames="id" referencedTableName="Publication"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-142-7">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="users_id" baseTableName="Publication_User" constraintName="FK_PublicationUser_User_Id" referencedColumnNames="id" referencedTableName="User"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-142-8">
		<addForeignKeyConstraint baseColumnNames="Publication_id" baseTableName="Publication_Tag" constraintName="FK_PublicationTag_Publication_Id" referencedColumnNames="id" referencedTableName="Publication"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-142-11">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="tags_id" baseTableName="Publication_Tag" constraintName="FK_PublicationTag_Tag_Id" referencedColumnNames="id" referencedTableName="Tag"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-142-12">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="floor_id" baseTableName="Publication" constraintName="FK_Publication_Floor_Id" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-118-1">
		<createTable tableName="ApiKey">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="ApiKeyPK"/>
			</column>
			<column name="creationDate" type="datetime"/>
			<column name="modificationDate" type="datetime"/>
			<column name="host" type="VARCHAR(255)"/>
			<column name="value" type="VARCHAR(255)"/>
			<column name="user_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-118-2">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="user_id" baseTableName="ApiKey" constraintName="FK_ApiKeyUser_Id" referencedColumnNames="id" referencedTableName="User"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-152-1">
		<addColumn tableName="Area">
			<column name="floor_id" type="bigint"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-152-2">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="floor_id" baseTableName="Area" constraintName="FK_Area_Floor_Id" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>

	<changeSet author="kgebert (generated)" id="navi-166-1">
		<addColumn tableName="Coordinates">
			<column name="floor_id" type="bigint"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-166-2">
		<addColumn tableName="Coordinates">
			<column name="tag_id" type="bigint"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-166-3">
		<addForeignKeyConstraint onUpdate="CASCADE" onDelete="CASCADE" baseColumnNames="floor_id" baseTableName="Coordinates" constraintName="FK_Coordiantes_Floor" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-166-4">
		<addForeignKeyConstraint onUpdate="CASCADE" onDelete="CASCADE" baseColumnNames="tag_id" baseTableName="Coordinates" constraintName="FK_Coordiantes_Tag" referencedColumnNames="id" referencedTableName="Tag"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-166-5">
		<dropColumn columnName="device" tableName="coordinates"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-187-1">
		<createTable tableName="Publication_Floor">
			<column name="Publication_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="floors_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-187-2">
		<addForeignKeyConstraint baseColumnNames="Publication_id" baseTableName="Publication_Floor" constraintName="FK_Publication_Floor_Publication_Id" referencedColumnNames="id" referencedTableName="Publication"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-187-3">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="floors_id" baseTableName="Publication_Floor" constraintName="FK_Publication_Floor_Floor_Id" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-187-4">
		<dropForeignKeyConstraint baseTableName="publication" constraintName="FK_Publication_Floor_Id"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-187-5">
		<dropColumn columnName="floor_id" tableName="publication"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-184-1">
		<addColumn tableName="Configuration">
			<column name="publishedDate" type="datetime"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-184-2">
		<dropColumn columnName="published" tableName="configuration"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-184-3">
		<addColumn tableName="Configuration">
			<column name="saveDraftDate" type="datetime"/>
		</addColumn>
	</changeSet>

	<changeSet author="kgebert (generated)" id="navi-195-1">
		<createTable tableName="RoutePart">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="RoutePartPK"/>
			</column>
			<column name="creationDate" type="datetime"/>
			<column name="modificationDate" type="datetime"/>
			<column name="sortIndex" type="INT"/>
			<column name="deviceShortId" type="INT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-2">
		<addColumn tableName="Device">
			<column name="AorB" type="tinyint">
				<constraints nullable="false"/>
			</column>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-4">
		<addColumn tableName="RoutePart">
			<column name="owner_id" type="bigint"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-5">
		<addForeignKeyConstraint onUpdate="CASCADE" onDelete="CASCADE" baseColumnNames="owner_id" baseTableName="RoutePart" constraintName="FK_RoutePart_Owner" referencedColumnNames="id" referencedTableName="Device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-6">
		<addColumn tableName="Device">
			<column name="firmwareVersion" type="varchar(255)"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-7">
		<addColumn tableName="Device">
			<column name="commitHash" type="varchar(255)"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-8">
		<addColumn tableName="Device">
			<column name="major" type="integer"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-9">
		<addColumn tableName="Device">
			<column name="minor" type="integer"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-10">
		<addColumn tableName="Device">
			<column name="firmwarePartition" type="integer"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-11">
		<dropColumn columnName="AorB" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-195-12">
		<dropColumn columnName="firmwareVersion" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-312-1">
		<addColumn tableName="Anchor">
			<column name="z" type="integer"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-313-1">
		<addColumn tableName="Area">
			<column name="hMax" type="integer"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-313-2">
		<addColumn tableName="Area">
			<column name="hMin" type="integer"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-1">
		<createTable tableName="Bluetooth">
			<column name="major" type="INT"/>
			<column name="minor" type="INT"/>
			<column name="power" type="SMALLINT"/>
			<column name="id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-2">
		<createTable tableName="Uwb">
			<column name="commitHash" type="VARCHAR(255)"/>
			<column name="major" type="INT"/>
			<column name="minor" type="INT"/>
			<column name="firmwarePartition" type="INT"/>
			<column name="shortId" type="INT"/>
			<column name="id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-3">
		<addColumn tableName="Anchor">
			<column name="floor_id" type="bigint"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-4">
		<addColumn tableName="Device">
			<column name="mac" type="varchar(255)"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-5">
		<addPrimaryKey columnNames="id" constraintName="BluetoothPK" tableName="Bluetooth"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-6">
		<addPrimaryKey columnNames="id" constraintName="UwbPK" tableName="Uwb"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-7">
		<addUniqueConstraint columnNames="major" constraintName="UC_BLUETOOTHMAJOR_COL" tableName="Bluetooth"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-8">
		<addUniqueConstraint columnNames="minor" constraintName="UC_BLUETOOTHMINOR_COL" tableName="Bluetooth"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-9">
		<addUniqueConstraint columnNames="mac" constraintName="UC_DEVICEMAC_COL" tableName="Device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-10">
		<addUniqueConstraint columnNames="shortId" constraintName="UC_UWBSHORTID_COL" tableName="Uwb"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-11">
		<addForeignKeyConstraint baseColumnNames="id" baseTableName="Tag" constraintName="FK_Tag_Uwb" referencedColumnNames="id" referencedTableName="Uwb"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-12">
		<addForeignKeyConstraint baseColumnNames="id" baseTableName="Anchor" constraintName="FK_Anchor_UWb" referencedColumnNames="id" referencedTableName="Uwb"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-13">
		<addForeignKeyConstraint onDelete="SET NULL" baseColumnNames="floor_id" baseTableName="Anchor" constraintName="FK_Anchor_Floor" referencedColumnNames="id" referencedTableName="Floor"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-14">
		<addForeignKeyConstraint baseColumnNames="id" baseTableName="Uwb" constraintName="FK_Uwb_Device" referencedColumnNames="id" referencedTableName="Device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-15">
		<addForeignKeyConstraint baseColumnNames="id" baseTableName="Bluetooth" constraintName="FK_Bluetooth_Device" referencedColumnNames="id" referencedTableName="Device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-16">
		<dropForeignKeyConstraint baseTableName="anchor" constraintName="Anchor_Device_Id"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-17">
		<dropForeignKeyConstraint baseTableName="device" constraintName="Device_Floor_Id"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-18">
		<dropForeignKeyConstraint baseTableName="tag" constraintName="Tag_Device_Id"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-19">
		<dropUniqueConstraint constraintName="unique_longId" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-20">
		<dropUniqueConstraint constraintName="unique_shortId" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-21">
		<dropColumn columnName="commitHash" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-22">
		<dropColumn columnName="firmwarePartition" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-23">
		<dropColumn columnName="floor_id" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-24">
		<dropColumn columnName="longId" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-25">
		<dropColumn columnName="major" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-26">
		<dropColumn columnName="minor" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-364-27">
		<dropColumn columnName="shortId" tableName="device"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-374-1">
		<createTable tableName="Phone">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="PhonePK"/>
			</column>
			<column name="creationDate" type="datetime"/>
			<column name="modificationDate" type="datetime"/>
			<column name="userData" type="VARCHAR(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-1">
		<createTable tableName="PhoneCoordinates">
			<column name="id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="phone_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-2">
		<createTable tableName="UwbCoordinates">
			<column name="id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="tag_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-3">
		<addPrimaryKey columnNames="id" constraintName="PhoneCoordinatesPK" tableName="PhoneCoordinates"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-4">
		<addPrimaryKey columnNames="id" constraintName="UwbCoordinatesPK" tableName="UwbCoordinates"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-5">
		<addForeignKeyConstraint baseColumnNames="tag_id" baseTableName="UwbCoordinates" constraintName="FK_UwbCoordinates_Tag" referencedColumnNames="id" referencedTableName="Tag"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-6">
		<addForeignKeyConstraint baseColumnNames="phone_id" baseTableName="PhoneCoordinates" constraintName="FK_PhoneCoordinates_Phone" referencedColumnNames="id" referencedTableName="Phone"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-7">
		<addForeignKeyConstraint baseColumnNames="id" baseTableName="PhoneCoordinates" constraintName="FK_PhoneCoordinates_Coordinates" referencedColumnNames="id" referencedTableName="Coordinates"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-8">
		<addForeignKeyConstraint baseColumnNames="id" baseTableName="UwbCoordinates" constraintName="FK_UwbCoordinates_Coordinates" referencedColumnNames="id" referencedTableName="Coordinates"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-9">
		<dropForeignKeyConstraint baseTableName="coordinates" constraintName="FK_Coordiantes_Tag"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-376-10">
		<dropColumn columnName="tag_id" tableName="coordinates"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-409-1">
		<dropUniqueConstraint constraintName="UC_BLUETOOTHMAJOR_COL" tableName="Bluetooth"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-409-2">
		<dropUniqueConstraint constraintName="UC_BLUETOOTHMINOR_COL" tableName="Bluetooth"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-378-1">
		<addColumn tableName="Coordinates">
			<column name="z" type="integer">
				<constraints nullable="false"/>
			</column>
		</addColumn>
	</changeSet>
	<changeSet id="navi-443-1" author="kgebert">
		<dropForeignKeyConstraint baseTableName="PhoneCoordinates" constraintName="FK_PhoneCoordinates_Coordinates" />
	</changeSet>
	<changeSet id="navi-443-2" author="kgebert">
		<dropForeignKeyConstraint baseTableName="UwbCoordinates" constraintName="FK_UwbCoordinates_Coordinates" />
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-443-3">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="id" baseTableName="PhoneCoordinates" constraintName="FK_PhoneCoordinates_Coordinates" referencedColumnNames="id" referencedTableName="Coordinates"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-443-4">
		<addForeignKeyConstraint onDelete="CASCADE" baseColumnNames="id" baseTableName="UwbCoordinates" constraintName="FK_UwbCoordinates_Coordinates" referencedColumnNames="id" referencedTableName="Coordinates"/>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-441-1">
		<addColumn tableName="Coordinates">
			<column name="measurementTime" type="datetime"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-512-1">
		<createTable tableName="DebugReport">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="DebugReportPK"/>
			</column>
			<column name="creationDate" type="datetime"/>
			<column name="modificationDate" type="datetime"/>
			<column name="data" type="MEDIUMBLOB"/>
			<column name="name" type="VARCHAR(255)"/>
			<column name="reportType" type="VARCHAR(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-457-1">
		<addColumn tableName="Area">
			<column name="polygonInPixels" type="POLYGON"/>
		</addColumn>
	</changeSet>
	<changeSet author="kgebert (generated)" id="navi-623-1">
		<addColumn tableName="Floor">
			<column name="archived" type="bit">
				<constraints nullable="false"/>
			</column>
		</addColumn>
	</changeSet>
</databaseChangeLog>
